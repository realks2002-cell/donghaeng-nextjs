# 행복안심동행 관리자 사용설명서 (상세버전)

버전: 2.0
최종 수정일: 2026-02-17
작성자: 행복안심동행 개발팀

---

## 📑 목차

1. [시작하기](#1-시작하기)
2. [대시보드](#2-대시보드)
3. [회원 관리](#3-회원-관리)
4. [매니저 관리](#4-매니저-관리)
5. [매니저 지원 관리](#5-매니저-지원-관리)
6. [서비스 요청 관리](#6-서비스-요청-관리)
7. [지정 매칭 관리](#7-지정-매칭-관리)
8. [결제 관리](#8-결제-관리)
9. [수익 관리](#9-수익-관리)
10. [서비스 가격 관리](#10-서비스-가격-관리)
11. [설정](#11-설정)
12. [자주 묻는 질문](#12-자주-묻는-질문)

---

## 1. 시작하기

### 1.1 관리자 로그인

#### 접속 방법
1. 웹 브라우저를 엽니다
2. 관리자 페이지 URL 접속: `https://도메인/admin/login`
3. 로그인 화면이 표시됩니다

#### 로그인 절차
1. **관리자 ID** 입력란에 ID 입력
2. **비밀번호** 입력란에 비밀번호 입력
3. **로그인** 버튼 클릭

#### 화면 구성
- 중앙에 위치한 로그인 폼
- 로고 이미지
- ID/비밀번호 입력 필드
- 로그인 버튼

#### 보안 정보
- **인증 방식**: 쿠키 기반 세션 + bcrypt 암호화
- **세션 유지**: 브라우저 종료 시까지 유지
- **자동 로그아웃**: 일정 시간 미사용 시 자동 로그아웃

⚠️ **주의사항**
- 관리자 계정은 모든 데이터에 접근 가능합니다
- 계정 정보를 안전하게 보관하세요
- 공용 컴퓨터 사용 후 반드시 로그아웃하세요

---

## 2. 대시보드

### 2.1 접근 방법
- 로그인 후 자동으로 대시보드 화면으로 이동
- 왼쪽 사이드바에서 "대시보드" 클릭

### 2.2 화면 구성

#### 2.2.1 통계 카드 (4개)

상단에 4개의 통계 카드가 가로로 배치되어 있습니다:

| 통계 카드 | 표시 내용 | 색상 |
|-----------|-----------|------|
| **전체 회원** | 플랫폼에 가입한 고객 수 | 검정색 |
| **전체 매니저** | 승인된 매니저 수 | 검정색 |
| **대기 중인 요청** | 아직 처리되지 않은 서비스 요청 수 | 파란색 (강조) |
| **총 매출** | 결제 완료된 전체 금액 | 녹색 (강조) |

📌 **실시간 업데이트**: 페이지를 새로고침하면 최신 데이터가 표시됩니다

#### 2.2.2 최근 서비스 요청 테이블

대시보드 하단에는 최근 10개의 서비스 요청이 테이블로 표시됩니다.

**테이블 컬럼**:
1. **요청일시**: 요청이 접수된 날짜와 시간 (예: 2026-02-17 14:30:00)
2. **고객**: 고객 이름 (회원) 또는 "비회원" 표시
3. **서비스**: 서비스 종류 (병원 동행, 가사돌봄 등)
4. **일시**: 서비스 예정 날짜와 시작 시간
5. **상태**: 요청의 현재 상태 (컬러 뱃지로 표시)
6. **금액**: 예상 결제 금액

**상태 종류 및 색상**:

| 상태 | 한글 표시 | 색상 | 의미 |
|------|-----------|------|------|
| PENDING | 대기 중 | 🟡 노란색 | 새로 접수된 요청 |
| CONFIRMED | 확인됨 | 🔵 파란색 | 관리자가 확인한 요청 |
| MATCHING | 매칭 중 | 🟣 보라색 | 매니저 매칭 진행 중 |
| MATCHED | 매칭 완료 | 🟢 녹색 | 매니저 배정 완료 |
| IN_PROGRESS | 진행 중 | 🔷 남색 | 서비스 진행 중 |
| COMPLETED | 완료 | ✅ 녹색 | 서비스 완료 |
| CANCELLED | 취소됨 | 🔴 빨간색 | 고객 또는 관리자가 취소 |

#### 2.2.3 데이터 로딩 상태

화면이 처음 로드될 때:
1. 스피너 애니메이션 표시
2. "로딩 중..." 텍스트 표시
3. 데이터 로드 완료 후 통계 및 테이블 표시

---

## 3. 회원 관리

### 3.1 접근 방법
- 왼쪽 사이드바 → **"회원 관리"** 클릭

### 3.2 화면 구성

#### 3.2.1 상단 타이틀
- **"회원 관리"** 제목 표시

#### 3.2.2 검색 영역

**검색 기능 사용법**:

1. **검색창 위치**: 화면 상단, 흰색 박스 안
2. **검색 가능한 정보**: 이름, 전화번호, 이메일
3. **검색 절차**:
   ```
   ① 검색창에 검색어 입력
   ② "검색" 버튼 클릭 (또는 Enter 키)
   ③ 검색 결과가 테이블에 표시됨
   ```

4. **검색 초기화**:
   - 검색어가 있을 때 "초기화" 버튼이 나타남
   - "초기화" 버튼 클릭 → 전체 회원 목록으로 복귀

**검색창 구성**:
- 🔍 아이콘 (검색창 왼쪽)
- 입력 필드: "이름, 전화번호, 이메일로 검색" 플레이스홀더
- "검색" 버튼 (파란색)
- "초기화" 버튼 (검색 시에만 표시)

#### 3.2.3 회원 목록 테이블

**테이블 컬럼**:

| 컬럼명 | 표시 내용 | 예시 |
|--------|-----------|------|
| **이름** | 회원 이름 | 홍길동 |
| **전화번호** | 연락처 | 010-1234-5678 또는 "-" |
| **주소** | 주소 (기본 + 상세) | 서울시 강남구 테헤란로 123<br/>101동 1001호 (상세주소) |
| **상태** | 활성/비활성 상태 | 🟢 활성 / 🔴 비활성 |
| **가입일** | 가입 날짜 | 2026.02.17 |

**상태 표시**:
- ✅ **활성** (녹색 뱃지): 정상적으로 이용 가능한 회원
- ❌ **비활성** (빨간색 뱃지): 탈퇴 또는 정지된 회원

#### 3.2.4 페이지네이션

**페이지 이동 방법**:

1. **표시 단위**: 한 페이지당 20명씩 표시
2. **현재 페이지 정보**: 테이블 하단에 표시
   - 예: "총 150명 중 1-20명 표시"

3. **페이지 이동 버튼**:
   - **"이전"** 버튼: 이전 페이지로 이동 (첫 페이지에서는 비활성화)
   - **"다음"** 버튼: 다음 페이지로 이동 (마지막 페이지에서는 비활성화)

4. **빠른 페이지 이동**:
   - URL의 `?page=숫자` 파라미터를 직접 수정하여 이동 가능

#### 3.2.5 데이터 없음 상태
- 회원이 없거나 검색 결과가 없을 때:
  ```
  회원이 없습니다.
  ```
  (테이블 중앙에 회색 텍스트로 표시)

### 3.3 사용 시나리오

#### 시나리오 1: 특정 회원 검색
```
1. "홍길동" 검색
   → 검색창에 "홍길동" 입력
   → "검색" 버튼 클릭
   → 이름에 "홍길동"이 포함된 회원 목록 표시

2. 전화번호로 검색
   → 검색창에 "010-1234-5678" 입력
   → "검색" 버튼 클릭
   → 해당 전화번호의 회원 표시

3. 검색 초기화
   → "초기화" 버튼 클릭
   → 전체 회원 목록으로 복귀
```

---

## 4. 매니저 관리

### 4.1 접근 방법
- 왼쪽 사이드바 → **"매니저 관리"** 클릭

### 4.2 화면 구성

#### 4.2.1 검색 영역

**검색 기능**:
- **검색 가능 정보**: 이름, 전화번호, 주소, 특기
- **검색 절차**: [회원 관리와 동일]

#### 4.2.2 매니저 목록 테이블

**테이블 컬럼 (10개)**:

| 컬럼명 | 표시 내용 | 특징 |
|--------|-----------|------|
| **사진** | 프로필 사진 | 원형 이미지 (40x40px)<br/>사진 없으면 기본 아이콘 표시 |
| **이름** | 매니저 이름 | 굵은 글씨 |
| **주민번호** | 주민번호 (마스킹) | 앞 6자리만 표시<br/>예: 901234-******* |
| **전화번호** | 연락처 | 010-1234-5678 |
| **주소** | 주소 (기본 + 상세) | 2줄로 표시 |
| **은행** | 은행명 | 국민은행, 신한은행 등 |
| **계좌번호** | 계좌번호 | 123-456-789012 |
| **특기** | 전문 분야 | 쉼표로 구분<br/>예: 병원동행, 노인돌봄 |
| **승인상태** | 현재 승인 상태 | 승인/거절/대기중 |
| **등록일** | 등록 날짜 | 2026.02.17 |

#### 4.2.3 승인 상태 및 액션

**승인 상태 종류**:

| 상태 | 표시 | 색상 | 액션 버튼 |
|------|------|------|-----------|
| **approved** | 승인 | 🟢 녹색 뱃지 | 없음 (이미 승인됨) |
| **rejected** | 거절 | 🔴 빨간색 뱃지 | 없음 (이미 거절됨) |
| **pending** | 대기중 | 🟡 노란색 뱃지 | **승인**, **거절** 버튼 표시 |

**승인/거절 버튼 동작**:

1. **승인 버튼 클릭 시**:
   ```
   ① 승인 버튼 클릭 (녹색)
   ② 버튼이 비활성화되고 "승인 중..." 표시
   ③ API 요청 전송
   ④ 성공 시: 상태가 "승인"으로 변경
   ⑤ 실패 시: "상태 변경에 실패했습니다." 알림
   ```

2. **거절 버튼 클릭 시**:
   ```
   ① 거절 버튼 클릭 (빨간색)
   ② 버튼이 비활성화되고 "거절 중..." 표시
   ③ API 요청 전송
   ④ 성공 시: 상태가 "거절"로 변경
   ⑤ 실패 시: "상태 변경에 실패했습니다." 알림
   ```

#### 4.2.4 주민번호 마스킹

**보안 처리**:
- 주민번호 뒷자리는 `*******`로 표시
- 예시:
  - 원본: `901234-1234567`
  - 표시: `901234-*******`

#### 4.2.5 페이지네이션
- 한 페이지당 20명씩 표시
- 이전/다음 버튼으로 이동

### 4.3 사용 시나리오

#### 시나리오 1: 대기 중인 매니저 승인

```
1. 매니저 관리 페이지 접속
2. 테이블에서 "대기중" 상태 매니저 찾기
3. 해당 매니저의 정보 확인:
   - 사진
   - 주민번호
   - 주소
   - 은행/계좌번호
   - 특기
4. 모든 정보가 올바르면 "승인" 버튼 클릭
5. 상태가 "승인"으로 변경됨
```

#### 시나리오 2: 특정 매니저 검색

```
1. 검색창에 매니저 이름 입력
2. "검색" 버튼 클릭
3. 해당 매니저의 정보 확인
4. 필요시 승인/거절 처리
```

---

## 5. 매니저 지원 관리

### 5.1 접근 방법
- 왼쪽 사이드바 → **"매니저 지원확인"** 클릭

### 5.2 화면 구성

#### 5.2.1 페이지 타이틀
- **"매니저 지원확인"** 제목 표시

#### 5.2.2 매니저 지원 목록 테이블

**테이블 컬럼 (8개)**:

| 컬럼명 | 표시 내용 | 설명 |
|--------|-----------|------|
| **지원일시** | 지원 접수 날짜/시간 | 2026-02-17 14:30:00 |
| **매니저** | 매니저 이름<br/>전화번호 | 2줄로 표시<br/>이름: 굵은 글씨<br/>전화: 회색 작은 글씨 |
| **서비스** | 지원한 서비스 종류 | 병원 동행, 가사돌봄 등 |
| **예약일시** | 서비스 예정일<br/>시작 시간 | 2줄로 표시 |
| **고객** | 고객 이름 | 회원 또는 "비회원" |
| **금액** | 예상 금액 | 20,000원 (굵은 글씨) |
| **상태** | 지원 상태 | 대기중/승인됨/거절됨 |
| **처리** | 액션 버튼 | 승인/거절 버튼 |

#### 5.2.3 상태 및 액션

**지원 상태 종류**:

| 상태 | 표시 | 색상 | 액션 |
|------|------|------|------|
| **PENDING** | 대기중 | 🟡 노란색 | 승인/거절 버튼 표시 |
| **ACCEPTED** | 승인됨 | 🟢 녹색 | "처리완료" 표시 (버튼 없음) |
| **REJECTED** | 거절됨 | 🔴 빨간색 | "처리완료" 표시 (버튼 없음) |

**승인/거절 프로세스**:

1. **승인 버튼 클릭 시**:
   ```
   ① "승인" 버튼 (녹색) 클릭
   ② 확인 대화상자 표시: "이 지원을 승인하시겠습니까?"
   ③ 확인 클릭
   ④ 버튼 비활성화 및 "승인 중..." 표시
   ⑤ API 요청 전송
   ⑥ 성공 시:
      - 상태가 "승인됨"으로 변경
      - 해당 매니저가 서비스 요청에 배정됨
      - 알림 발송 (매니저에게)
   ⑦ 실패 시: 에러 메시지 표시
   ```

2. **거절 버튼 클릭 시**:
   ```
   ① "거절" 버튼 (빨간색) 클릭
   ② 확인 대화상자 표시: "이 지원을 거절하시겠습니까?"
   ③ 확인 클릭
   ④ 버튼 비활성화 및 "거절 중..." 표시
   ⑤ API 요청 전송
   ⑥ 성공 시:
      - 상태가 "거절됨"으로 변경
      - 다른 매니저에게 지원 기회 제공
   ⑦ 실패 시: 에러 메시지 표시
   ```

#### 5.2.4 데이터 로딩
- 최대 100건의 지원 내역 표시
- 최신순으로 정렬

### 5.3 사용 시나리오

#### 시나리오 1: 매니저 지원 승인
```
1. "매니저 지원확인" 페이지 접속
2. "대기중" 상태의 지원 내역 확인
3. 매니저 정보 확인 (이름, 전화번호)
4. 서비스 정보 확인 (서비스 종류, 날짜, 고객)
5. "승인" 버튼 클릭
6. 확인 대화상자에서 "확인" 클릭
7. 승인 완료!
```

---

## 6. 서비스 요청 관리

### 6.1 접근 방법
- 왼쪽 사이드바 → **"예약요청 및 매칭 현황"** 클릭

### 6.2 화면 구성

#### 6.2.1 페이지 타이틀
- **"예약요청 및 매칭 현황"** 제목 표시

#### 6.2.2 서비스 요청 목록 테이블

**테이블 컬럼 (8개)**:

| 컬럼명 | 표시 내용 | 설명 |
|--------|-----------|------|
| **요청일시** | 요청 접수 날짜/시간 | 2026-02-17 14:30:00 |
| **고객** | 고객 이름 | 회원명 또는 "비회원" |
| **서비스** | 서비스 종류 | 병원 동행, 가사돌봄 등 |
| **예약일시** | 서비스 날짜 + 시작 시간 | 2026-02-20 10:00 |
| **매니저** | 배정된 매니저<br/>전화번호 | 배정 전: "-" 표시<br/>배정 후: 이름 + 전화번호 |
| **상태** | 요청 상태 | 컬러 뱃지로 표시 |
| **금액** | 예상 금액 | 60,000원 |
| **구분** | 지정 여부 | 🟣 "지정" 뱃지 또는 "-" |

#### 6.2.3 상태 컬러 코드

| 상태 | 표시 | 색상 |
|------|------|------|
| PENDING | 대기중 | 🟡 노란색 |
| CONFIRMED | 확인됨 | 🔵 파란색 |
| MATCHING | 매칭중 | 🟣 보라색 |
| MATCHED | 매칭완료 | 🔷 남색 |
| IN_PROGRESS | 진행중 | 🟠 주황색 |
| COMPLETED | 완료 | 🟢 녹색 |
| CANCELLED | 취소됨 | 🔴 빨간색 |

#### 6.2.4 지정 매칭 표시

**지정 매칭이란?**
- 고객이 특정 매니저를 지정하여 요청한 서비스

**표시 방법**:
- 지정 매칭: 🟣 "지정" 뱃지 (보라색)
- 일반 매칭: "-" 표시

### 6.3 사용 시나리오

#### 시나리오 1: 전체 요청 현황 모니터링
```
1. "예약요청 및 매칭 현황" 페이지 접속
2. 전체 요청 목록 확인
3. 상태별로 분류하여 확인:
   - 노란색 "대기중": 아직 확인하지 않은 신규 요청
   - 보라색 "매칭중": 매니저를 찾는 중
   - 녹색 "매칭완료": 매니저 배정 완료
4. "지정" 뱃지가 있는 요청:
   → "지정 매칭 관리" 페이지에서 별도 처리
```

---

## 7. 지정 매칭 관리

### 7.1 접근 방법
- 왼쪽 사이드바 → **"지정 매니저 매칭"** 클릭

### 7.2 화면 구성

#### 7.2.1 페이지 설명
- **제목**: "지정 매니저 매칭"
- **부제**: "고객이 지정한 매니저 매칭 요청을 승인 또는 거절하세요."

#### 7.2.2 지정 매칭 요청 테이블

**테이블 컬럼 (7개)**:

| 컬럼명 | 표시 내용 |
|--------|-----------|
| **요청일시** | 요청 접수 날짜/시간 |
| **고객** | 고객 이름<br/>전화번호 (2줄) |
| **서비스** | 서비스 종류 |
| **예약일시** | 서비스 날짜<br/>시작 시간 (2줄) |
| **지정 매니저** | 매니저 이름<br/>전화번호 (2줄) |
| **금액** | 예상 금액 |
| **처리** | 승인/거절 버튼 |

#### 7.2.3 승인/거절 프로세스

**승인 절차**:
```
1. "승인" 버튼 (녹색) 클릭
2. 확인 대화상자: "이 매칭을 승인하시겠습니까?"
3. 확인 클릭
4. API 처리
5. 성공 시:
   - "매칭이 승인되었습니다." 알림
   - "예약요청 및 매칭 현황" 페이지로 자동 이동
   - 해당 요청의 상태가 "매칭완료"로 변경
   - 매니저에게 알림 발송
6. 실패 시: 에러 메시지 표시
```

**거절 절차**:
```
1. "거절" 버튼 (빨간색) 클릭
2. 확인 대화상자: "이 매칭을 거절하시겠습니까?"
3. 확인 클릭
4. API 처리
5. 성공 시:
   - "매칭이 거절되었습니다." 알림
   - 해당 요청이 목록에서 제거됨
   - 요청 상태가 "매칭중"으로 변경 (다른 매니저 매칭 가능)
6. 실패 시: 에러 메시지 표시
```

### 7.3 사용 시나리오

#### 시나리오 1: 지정 매칭 승인
```
상황: 고객 "홍길동"이 매니저 "김철수"를 지정하여 병원 동행 서비스를 요청

1. "지정 매니저 매칭" 페이지 접속
2. 요청 내역 확인:
   - 고객: 홍길동 (010-1111-2222)
   - 서비스: 병원 동행
   - 예약일시: 2026-02-20 10:00
   - 지정 매니저: 김철수 (010-3333-4444)
   - 금액: 60,000원
3. 매니저 "김철수"의 일정 확인 (별도 시스템)
4. 일정이 가능하면 "승인" 버튼 클릭
5. 확인 대화상자에서 "확인" 클릭
6. 승인 완료 → 자동으로 "예약요청 및 매칭 현황" 페이지로 이동
```

---

## 8. 결제 관리

### 8.1 접근 방법
- 왼쪽 사이드바 → **"결제 내역 조회"** 클릭

### 8.2 화면 구성

#### 8.2.1 페이지 타이틀
- **"결제 내역 조회"** 제목 표시

#### 8.2.2 결제 내역 테이블

**테이블 컬럼 (9개)**:

| 컬럼명 | 표시 내용 | 설명 |
|--------|-----------|------|
| **서비스** | 서비스 종류 | 병원 동행 등 |
| **요청자** | 이름 + 전화번호 | 게스트명 또는 회원명<br/>전화번호 (2줄) |
| **결제일시** | 결제 날짜/시간 | 2026-02-17 14:30:00 |
| **주문번호** | 주문 ID | 앞 12자만 표시<br/>예: ORDER-202602... |
| **결제금액** | 결제한 금액 | 60,000원 (굵은 글씨) |
| **환불금액** | 환불된 금액 | -20,000원 (빨간색)<br/>환불 없으면 "-" |
| **결제수단** | 결제 방법 | 카드, 계좌이체 등 |
| **상태** | 결제 상태 | 컬러 뱃지 |
| **환불처리** | 환불 버튼 | 전액환불/부분환불 |

#### 8.2.3 결제 상태

| 상태 | 표시 | 색상 | 의미 |
|------|------|------|------|
| PAID | 결제완료 | 🟢 녹색 | 정상 결제 완료 |
| PENDING | 대기중 | 🟡 노란색 | 결제 대기 중 |
| REFUNDED | 전액환불 | ⚫ 회색 | 전액 환불 완료 |
| PARTIAL_REFUNDED | 부분환불 | 🟠 주황색 | 일부만 환불 |
| FAILED | 실패 | 🔴 빨간색 | 결제 실패 |
| CANCELLED | 취소 | ⚫ 회색 | 결제 취소 |

#### 8.2.4 환불 처리

**환불 가능 조건**:
- 상태가 `PAID` (결제완료) 또는 `PARTIAL_REFUNDED` (부분환불)

**환불 버튼**:
- ✅ 환불 가능: "전액환불", "부분환불" 버튼 표시
- ❌ 환불 불가 ("REFUNDED" 상태): "환불완료" 텍스트만 표시

##### 8.2.4.1 전액 환불

**전액 환불 절차**:
```
1. "전액환불" 버튼 (빨간색) 클릭
2. 확인 대화상자 표시:
   주문 ORDER-202...
   60,000원 전액 환불하시겠습니까?
3. "확인" 클릭
4. 버튼 비활성화 및 처리 중 표시
5. 토스페이먼츠 API를 통한 환불 처리
6. 성공 시:
   - 상태가 "전액환불"로 변경
   - 환불금액에 -60,000원 표시
   - 환불 완료 알림
7. 실패 시: 에러 메시지 표시
```

##### 8.2.4.2 부분 환불

**부분 환불 절차**:

```
1. "부분환불" 버튼 (주황색) 클릭

2. 부분 환불 모달 팝업 표시:
   ┌─────────────────────────┐
   │   부분 환불              │
   │                         │
   │ 결제 금액: 60,000원      │
   │ 기존 환불액: -20,000원   │ (있는 경우)
   │ ─────────────────────   │
   │ 환불 가능 금액: 40,000원 │
   │                         │
   │ 환불 금액 (원)          │
   │ [_______________]       │
   │                         │
   │  [취소]  [환불하기]     │
   └─────────────────────────┘

3. 환불할 금액 입력:
   - 최소 1원 이상
   - 최대: 환불 가능 금액까지

4. "환불하기" 버튼 클릭

5. 유효성 검사:
   - 금액이 입력되지 않음 → "환불 금액을 입력해주세요."
   - 환불 가능 금액 초과 → "환불 가능 금액은 40,000원입니다."

6. 토스페이먼츠 API를 통한 환불 처리

7. 성공 시:
   - 모달 닫힘
   - 환불금액 업데이트
   - 상태가 "부분환불"로 변경 (전액이 아닌 경우)
   - 또는 "전액환불"로 변경 (남은 금액 전부 환불한 경우)

8. 실패 시: 에러 메시지 표시
```

#### 8.2.5 데이터 로딩
- 최대 50건의 결제 내역 표시
- 최신순으로 정렬

### 8.3 사용 시나리오

#### 시나리오 1: 전액 환불 처리
```
상황: 고객이 서비스 24시간 전에 취소 요청

1. "결제 내역 조회" 페이지 접속
2. 해당 주문 찾기
3. 결제 정보 확인:
   - 결제금액: 60,000원
   - 상태: 결제완료
4. "전액환불" 버튼 클릭
5. 확인 대화상자에서 금액 재확인
6. "확인" 클릭
7. 환불 처리 완료!
   - 상태: 전액환불
   - 환불금액: -60,000원
```

#### 시나리오 2: 부분 환불 처리
```
상황: 서비스 시작 후 고객의 사정으로 일찍 종료 (3시간 → 2시간)

1. "결제 내역 조회" 페이지 접속
2. 해당 주문 찾기
   - 결제금액: 60,000원 (20,000원/시간 × 3시간)
3. "부분환불" 버튼 클릭
4. 부분 환불 모달에서:
   - 환불 가능 금액: 60,000원
   - 환불할 금액 입력: 20,000원 (1시간분)
5. "환불하기" 버튼 클릭
6. 환불 처리 완료!
   - 상태: 부분환불
   - 환불금액: -20,000원
   - 남은 금액: 40,000원
```

---

## 9. 수익 관리

### 9.1 접근 방법
- 왼쪽 사이드바 → **"일/월 매출 집계"** 클릭

### 9.2 화면 구성

#### 9.2.1 전체 요약 카드 (4개)

상단에 4개의 통계 카드가 표시됩니다:

| 카드 | 표시 내용 | 색상 |
|------|-----------|------|
| **총 결제 건수** | 전체 결제 건수 | 검정색 |
| **총 결제 금액** | 결제된 전체 금액 | 검정색 |
| **총 환불 금액** | 환불된 전체 금액 | 빨간색 (마이너스) |
| **순매출** | 결제 - 환불 | 파란색 (강조)<br/>유지 건수 표시 |

**계산 방법**:
```
순매출 = 총 결제 금액 - 총 환불 금액
유지 건수 = 상태가 "PAID"인 건수
```

#### 9.2.2 서비스별 순매출

**표시 형식**:
- 프로그레스 바 차트
- 서비스별로 색상 구분
- 금액 + 건수 표시
- 비율(%) 표시

**예시**:
```
병원 동행     ████████████████░░  80%  320,000원 (16건)
가사돌봄       ████████░░░░░░░░░░  40%  144,000원 (8건)
생활동행       ██████░░░░░░░░░░░░  30%  108,000원 (6건)
노인 돌봄      ████░░░░░░░░░░░░░░  20%  88,000원 (4건)
아이 돌봄      ██░░░░░░░░░░░░░░░░  10%  40,000원 (2건)
```

#### 9.2.3 일별/월별 탭

**탭 전환 방법**:
1. **일별 집계** 탭 클릭 (기본값)
2. **월별 집계** 탭 클릭

**탭 디자인**:
- 선택된 탭: 파란색 텍스트 + 하단 파란색 선
- 비선택 탭: 회색 텍스트

#### 9.2.4 일별 집계 테이블

**테이블 컬럼**:

| 컬럼명 | 표시 내용 | 예시 |
|--------|-----------|------|
| **날짜** | YYYY-MM-DD | 2026-02-17 |
| **건수** | 해당 날짜의 결제 건수 | 5건 |
| **결제 금액** | 총 결제 금액 | 300,000원 |
| **환불 금액** | 총 환불 금액 | -50,000원 (빨간색) |
| **순매출** | 결제 - 환불 | 250,000원 (파란색, 굵은 글씨) |

**정렬 순서**: 최신 날짜부터 (내림차순)

#### 9.2.5 월별 집계 테이블

**테이블 컬럼**:

| 컬럼명 | 표시 내용 | 예시 |
|--------|-----------|------|
| **월** | YYYY-MM | 2026-02 |
| **건수** | 해당 월의 결제 건수 | 120건 |
| **결제 금액** | 총 결제 금액 | 7,200,000원 |
| **환불 금액** | 총 환불 금액 | -800,000원 (빨간색) |
| **순매출** | 결제 - 환불 | 6,400,000원 (파란색, 굵은 글씨) |

**정렬 순서**: 최신 월부터 (내림차순)

#### 9.2.6 데이터 범위
- 최대 500건의 결제 데이터 기반
- 상태가 `PAID`, `REFUNDED`, `PARTIAL_REFUNDED`인 결제만 집계

### 9.3 사용 시나리오

#### 시나리오 1: 이번 달 매출 확인
```
1. "일/월 매출 집계" 페이지 접속
2. 전체 요약 카드에서 순매출 확인
3. "월별 집계" 탭 클릭
4. 2026-02 월의 데이터 확인:
   - 총 결제 건수
   - 결제 금액
   - 환불 금액
   - 순매출
```

#### 시나리오 2: 서비스별 인기도 분석
```
1. "일/월 매출 집계" 페이지 접속
2. "서비스별 순매출" 섹션 확인
3. 프로그레스 바와 건수로 인기 서비스 파악:
   - 가장 긴 바 = 가장 많은 매출
   - 건수가 많은 서비스 = 인기 서비스
4. 마케팅 전략 수립에 활용
```

---

## 10. 서비스 가격 관리

### 10.1 접근 방법
- 왼쪽 사이드바 → **"서비스 가격 관리"** 클릭

### 10.2 화면 구성

#### 10.2.1 안내 문구
```
┌────────────────────────────────────────┐
│ 서비스별 시간당 가격을 설정합니다.        │
│ 설정된 가격은 서비스 신청 시 자동으로     │
│ 적용되며, 결제 금액에 반영됩니다.         │
└────────────────────────────────────────┘
```

#### 10.2.2 가격 설정 카드 (6개)

각 서비스마다 개별 카드로 표시:

**카드 구성**:
```
┌─────────────────────────────┐
│ 병원 동행              비활성 │ (활성화된 경우 표시 안 됨)
│ 진료 접수부터 약국 처방까지    │
│                              │
│ 시간당 가격 (원)              │
│ [20000            ] 원        │
│ 현재: 20,000원/시간           │
│                              │
│ 최종 수정: 2026-02-17 10:00   │ (수정된 경우)
│                              │
│      [ 가격 저장 ]            │
└─────────────────────────────┘
```

**카드 레이아웃**:
- 3열 그리드 (데스크톱)
- 2열 그리드 (태블릿)
- 1열 (모바일)

#### 10.2.3 가격 입력 필드

**입력 제한**:
- **최소값**: 1,000원
- **최대값**: 100,000원
- **증감 단위**: 1,000원

**입력 방법**:
1. 숫자 직접 입력
2. 위/아래 화살표로 1,000원 단위 증감

#### 10.2.4 가격 저장 프로세스

**저장 절차**:
```
1. 가격 입력 필드에 새로운 가격 입력
   예: 20,000 → 22,000

2. "가격 저장" 버튼 클릭

3. 유효성 검사:
   - 1,000원 미만 → "가격은 1,000원 이상 100,000원 이하로 설정해주세요."
   - 100,000원 초과 → 동일 메시지

4. 버튼 상태 변경:
   - 비활성화
   - 텍스트: "저장 중..."

5. API 요청 (Upsert 방식)

6. 성공 시:
   - 상단에 성공 메시지 표시:
     "병원 동행 가격이 22,000원으로 변경되었습니다."
   - "현재" 가격 업데이트
   - "최종 수정" 시간 업데이트

7. 실패 시:
   - 상단에 에러 메시지 표시:
     "가격 저장에 실패했습니다."
```

#### 10.2.5 가격 요약 테이블

화면 하단에 모든 서비스의 가격을 테이블로 요약 표시:

**테이블 컬럼**:

| 서비스 유형 | 시간당 가격 | 3시간 기준 | 5시간 기준 |
|------------|-------------|-----------|-----------|
| 병원 동행   | 20,000원    | 60,000원  | 100,000원 |
| 가사돌봄     | 18,000원    | 54,000원  | 90,000원  |
| 생활동행     | 18,000원    | 54,000원  | 90,000원  |
| 노인 돌봄   | 22,000원    | 66,000원  | 110,000원 |
| 아이 돌봄   | 20,000원    | 60,000원  | 100,000원 |
| 기타        | 20,000원    | 60,000원  | 100,000원 |

**자동 계산**:
- 3시간 기준 = 시간당 가격 × 3
- 5시간 기준 = 시간당 가격 × 5

### 10.3 사용 시나리오

#### 시나리오 1: 서비스 가격 인상
```
상황: 병원 동행 서비스 가격을 20,000원에서 22,000원으로 인상

1. "서비스 가격 관리" 페이지 접속
2. "병원 동행" 카드 찾기
3. 현재 가격 확인: 20,000원/시간
4. 입력 필드에 새 가격 입력: 22,000
5. "가격 저장" 버튼 클릭
6. 성공 메시지 확인:
   "병원 동행 가격이 22,000원으로 변경되었습니다."
7. 가격 요약 테이블에서 자동 계산된 금액 확인:
   - 3시간: 66,000원
   - 5시간: 110,000원
```

#### 시나리오 2: 여러 서비스 가격 일괄 수정
```
1. "서비스 가격 관리" 페이지 접속
2. 각 카드에서 차례로 가격 변경:
   - 병원 동행: 20,000 → 22,000
   - 저장
   - 가사돌봄: 18,000 → 20,000
   - 저장
   - 노인 돌봄: 22,000 → 25,000
   - 저장
3. 모든 변경 완료 후 가격 요약 테이블에서 최종 확인
```

---

## 11. 설정

### 11.1 접근 방법
- 왼쪽 사이드바 → **"관리자 설정"** 클릭

### 11.2 화면 구성

#### 11.2.1 관리자 추가 폼

**폼 레이아웃**:
```
┌────────────────────────────────────────────┐
│ 관리자 추가                                 │
│ ─────────────────────────────────────────  │
│ 관리자 ID *     비밀번호 *          │
│ [___________]  [___________] 👁️  [관리자 추가] │
│ 3자 이상 50자 이하  6자 이상              │
└────────────────────────────────────────────┘
```

**입력 필드**:

1. **관리자 ID**:
   - 타입: 텍스트
   - 필수: ✅
   - 최소 길이: 3자
   - 최대 길이: 50자
   - 플레이스홀더: "관리자 ID 입력"
   - 안내: "3자 이상 50자 이하"

2. **비밀번호**:
   - 타입: password (숨김) / text (표시)
   - 필수: ✅
   - 최소 길이: 6자
   - 플레이스홀더: "비밀번호 입력"
   - 안내: "6자 이상"
   - 기능: 👁️ 아이콘 클릭 시 표시/숨김 토글

3. **관리자 추가 버튼**:
   - 타입: submit
   - 색상: 파란색
   - 아이콘: 👤+ (UserPlus)
   - 텍스트: "관리자 추가" / "추가 중..."

**추가 프로세스**:

```
1. 폼에 정보 입력:
   - 관리자 ID: admin02
   - 비밀번호: password123

2. "관리자 추가" 버튼 클릭

3. 유효성 검사:
   - ID/비밀번호 빈 값 → "관리자 ID와 비밀번호를 모두 입력해주세요."
   - ID 3자 미만 또는 50자 초과 → "관리자 ID는 3자 이상 50자 이하여야 합니다."
   - 비밀번호 6자 미만 → "비밀번호는 6자 이상이어야 합니다."

4. 버튼 상태:
   - 비활성화
   - 텍스트: "추가 중..."

5. API 요청:
   - 비밀번호를 bcrypt로 해시화
   - 데이터베이스에 저장

6. 성공 시:
   - 성공 메시지 (녹색): "관리자가 추가되었습니다."
   - 입력 필드 초기화
   - 관리자 목록 새로고침

7. 실패 시:
   - 에러 메시지 (빨간색): "관리자 추가에 실패했습니다."
   - 또는 서버 메시지 표시 (예: "이미 존재하는 ID입니다.")
```

#### 11.2.2 관리자 목록 테이블

**테이블 구성**:

| 컬럼명 | 표시 내용 | 너비 |
|--------|-----------|------|
| **관리자 ID** | ID (문자열) | 넓음 |
| **생성일시** | 생성 날짜/시간 | 중간 |
| **작업** | 삭제 버튼 | 좁음 (중앙 정렬) |

**예시**:
```
┌──────────────┬────────────────────┬─────────┐
│ 관리자 ID     │ 생성일시             │  작업    │
├──────────────┼────────────────────┼─────────┤
│ admin01      │ 2026-02-15 10:00   │ [🗑️ 삭제] │
│ admin02      │ 2026-02-17 14:30   │ [🗑️ 삭제] │
└──────────────┴────────────────────┴─────────┘
```

#### 11.2.3 관리자 삭제

**삭제 프로세스**:

```
1. 삭제할 관리자의 "삭제" 버튼 클릭

2. 확인 대화상자 표시:
   "정말 삭제하시겠습니까?"

3. "확인" 클릭

4. 버튼 상태:
   - 비활성화
   - 텍스트: "삭제 중..."

5. API 요청

6. 성공 시:
   - 성공 메시지 (녹색): "관리자가 삭제되었습니다."
   - 해당 행이 테이블에서 제거됨

7. 실패 시:
   - 에러 메시지 (빨간색): "관리자 삭제에 실패했습니다."
   - 또는 서버 메시지 (예: "본인 계정은 삭제할 수 없습니다.")
```

⚠️ **주의사항**:
- 현재 로그인한 본인 계정은 삭제할 수 없습니다
- 최소 1명 이상의 관리자가 존재해야 합니다

### 11.3 사용 시나리오

#### 시나리오 1: 새 관리자 추가
```
상황: 새로운 직원 "홍길동"에게 관리자 권한 부여

1. "관리자 설정" 페이지 접속
2. 관리자 추가 폼에서:
   - 관리자 ID: hongkildong
   - 비밀번호: secure123!
3. 👁️ 아이콘 클릭하여 비밀번호 확인
4. "관리자 추가" 버튼 클릭
5. 성공 메시지 확인
6. 관리자 목록에 "hongkildong" 추가됨
7. 홍길동에게 ID와 비밀번호 전달 (보안 채널 사용)
```

#### 시나리오 2: 퇴사자 계정 삭제
```
상황: 직원 "김철수" 퇴사로 계정 삭제 필요

1. "관리자 설정" 페이지 접속
2. 관리자 목록에서 "kimcheolsu" 찾기
3. 해당 행의 "삭제" 버튼 클릭
4. 확인 대화상자에서 "확인" 클릭
5. 성공 메시지 확인
6. "kimcheolsu" 계정이 목록에서 제거됨
```

---

## 12. 자주 묻는 질문

### Q1. 비회원 요청은 어떻게 확인하나요?

**A**: 서비스 요청 관리 또는 대시보드 테이블에서 고객명이 "비회원"으로 표시됩니다.
- 요청 상세에서 게스트 정보(이름, 전화번호, 이메일)를 확인할 수 있습니다
- `guest_name`, `guest_phone`, `guest_email` 필드에 저장됨

---

### Q2. 매니저 지원이 중복으로 들어왔어요.

**A**: 현재 시스템은 **선착순 1명만 지원 가능**하도록 제한되어 있습니다.
- 동일 이메일로 중복 지원은 시스템적으로 차단됨
- 데이터베이스 레벨에서 UNIQUE 제약조건 설정

---

### Q3. 환불 처리는 얼마나 걸리나요?

**A**: 환불 처리 시간:
1. **시스템 처리**: 즉시 (토스페이먼츠 API)
2. **실제 입금**: 카드사별로 3-5 영업일 소요
3. **환불 상태**: 시스템에 즉시 반영됨

---

### Q4. 서비스 가격을 변경하면 언제부터 적용되나요?

**A**: 가격 변경 적용 시점:
- ✅ **즉시 적용**: 저장 버튼 클릭 시점부터
- ✅ **신규 요청만**: 기존 요청에는 영향 없음
- ❌ **이미 결제된 건**: 변경 불가

**예시**:
```
현재 시각: 2026-02-17 10:00
가격 변경: 병원 동행 20,000원 → 22,000원

10:00 이전 요청: 20,000원 적용
10:00 이후 요청: 22,000원 적용
```

---

### Q5. 관리자 계정 비밀번호를 잊어버렸어요.

**A**: 비밀번호 재설정 방법:

**방법 1** (권장): 다른 관리자에게 요청
```
1. 다른 관리자가 로그인
2. "관리자 설정" 페이지 접속
3. 해당 계정 삭제
4. 동일한 ID로 새 계정 생성
5. 새 비밀번호 전달
```

**방법 2**: 데이터베이스 직접 수정
```
1. Supabase 대시보드 접속
2. admins 테이블 열기
3. 해당 관리자의 password_hash 수정
   (새 비밀번호를 bcrypt로 해시화한 값)
```

⚠️ **보안 주의**:
- 비밀번호는 절대 평문으로 저장되지 않음
- bcrypt 해시 사용
- 데이터베이스에서도 원본 비밀번호 확인 불가

---

### Q6. 여러 요청을 한 번에 처리할 수 있나요?

**A**: 현재 시스템에서는 **개별 처리만 가능**합니다.
- 일괄 승인/거절 기능 없음
- 각 요청마다 버튼을 클릭해야 함

**향후 개선 예정**:
- 체크박스 선택 → 일괄 처리 기능
- 필터링 후 일괄 작업

---

### Q7. 매니저의 주민번호를 전체 확인하고 싶어요.

**A**: 보안상 주민번호 뒷자리는 웹에서 확인 불가합니다.

**확인 방법**:
1. **데이터베이스 직접 접근**:
   - Supabase 대시보드
   - managers 테이블
   - ssn 컬럼 확인

2. **API 개발** (필요시):
   - 관리자 전용 API 엔드포인트 추가
   - 추가 인증 절차 필요

---

### Q8. 매출 통계를 엑셀로 다운로드할 수 있나요?

**A**: 현재 시스템에서는 **다운로드 기능이 없습니다**.

**대안**:
1. **브라우저 복사-붙여넣기**:
   - 테이블 내용 드래그 선택
   - Ctrl+C 복사
   - 엑셀에 Ctrl+V 붙여넣기

2. **데이터베이스 쿼리**:
   - Supabase에서 SQL 쿼리
   - CSV 내보내기

**향후 개선 예정**:
- "엑셀 다운로드" 버튼 추가
- PDF 보고서 생성

---

### Q9. 서비스 요청의 상태를 수동으로 변경할 수 있나요?

**A**: 현재 웹 UI에서는 **상태 수동 변경 불가**입니다.

**상태 변경 방법**:
- 시스템 자동 변경:
  - 결제 완료 → CONFIRMED
  - 매니저 배정 → MATCHED
  - 서비스 시작 → IN_PROGRESS
  - 서비스 종료 → COMPLETED

**긴급 상황 시**:
- Supabase 대시보드에서 직접 수정
- `service_requests` 테이블 → `status` 컬럼

---

### Q10. 고객이 매니저를 변경 요청했어요.

**A**: 매니저 변경 절차:

1. **현재 매니저 제거**:
   - Supabase 대시보드
   - `service_requests` 테이블
   - 해당 요청의 `assigned_manager_id`를 NULL로 변경

2. **상태 변경**:
   - `status`를 `MATCHING`으로 변경

3. **새 매니저 배정**:
   - 고객이 새 매니저 지정 시: "지정 매칭 관리"에서 승인
   - 일반 매칭: 매니저가 지원하면 "매니저 지원 관리"에서 승인

---

## 부록 A. 키보드 단축키

| 기능 | 단축키 |
|------|--------|
| 검색창 포커스 | `/` |
| 새로고침 | `F5` 또는 `Ctrl+R` |
| 로그아웃 | (없음 - 사이드바 클릭 필요) |

---

## 부록 B. 시스템 요구사항

### 지원 브라우저
- ✅ Chrome 90 이상 (권장)
- ✅ Firefox 88 이상
- ✅ Safari 14 이상
- ✅ Edge 90 이상

### 권장 사양
- **화면 해상도**: 1280x720 이상
- **인터넷 속도**: 10Mbps 이상
- **JavaScript**: 활성화 필수

---

## 부록 C. 데이터 백업

### 자동 백업
- Supabase에서 자동 백업 수행
- 백업 주기: 일별
- 보관 기간: 30일

### 수동 백업
```sql
-- Supabase SQL Editor에서 실행
SELECT * FROM admins;
SELECT * FROM users;
SELECT * FROM managers;
-- ... (필요한 테이블)
```

---

## 부록 D. 문의 및 지원

### 시스템 문제 발생 시

**긴급 연락처**:
- 📧 이메일: [개발팀 이메일]
- 📞 전화: [전화번호]
- 💬 슬랙: #admin-support

**보고 시 포함 정보**:
1. 발생 시각
2. 문제 증상 (스크린샷)
3. 브라우저 정보
4. 실행한 작업
5. 에러 메시지 (있는 경우)

---

**문서 끝**

> 이 문서는 행복안심동행 플랫폼의 관리자용 상세 사용설명서입니다.
> 시스템 업데이트 시 본 문서도 함께 업데이트됩니다.
> 최종 수정: 2026-02-17
> 버전: 2.0
